(this["webpackJsonpcreate-react-app-with-typescript"]=this["webpackJsonpcreate-react-app-with-typescript"]||[]).push([[0],{160:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n(43),i=n.n(r),o=n(221),u=n(228),s=n(14),j=n(229),p=n(224),l=n(225),m=n(226),b=n(29),d=n(113),O=Object(d.a)(a||(a=Object(b.a)(["\n  query GetCityByName($name: String!) {\n    getCityByName(name: $name) {\n      id\n      name\n      coord {\n        lon\n        lat\n      }\n      weather {\n        summary {\n          title\n          description\n          icon\n        }\n      }\n    }\n  }\n"]))),f=n(227),h=n(60),y=n(61),x=n.n(y),g=n(85),w=n(230),v=n(222),S=n(232),C=n(223),k=new(n(108).Axios)({baseURL:"http://autocomplete.travelpayouts.com"}),I=function(e){return k.get("/places2",{params:{locale:"en",types:["city"],term:e}}).then((function(e){var t=JSON.parse(e.data),n=[];return t.forEach((function(e){n.find((function(t){return t.name===e.name}))||n.push({name:e.name,country_name:e.country_name})})),n}))},q=n(3),A=function(e){var t=e.onSelected,n=e.defaultValue,a=Object(c.useState)(!1),r=Object(s.a)(a,2),i=r[0],o=r[1],u=Object(c.useState)([]),j=Object(s.a)(u,2),p=j[0],l=j[1],m=Object(c.useState)(!0),b=Object(s.a)(m,2),d=b[0],O=b[1];return Object(c.useEffect)((function(){d&&Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(n);case 2:t=e.sent,l(t.map((function(e){return e.name}))),O(!1);case 5:case"end":return e.stop()}}),e)})))()}),[d]),Object(c.useEffect)((function(){i||l([])}),[i]),Object(q.jsx)(w.a,{style:{padding:10,width:"100%"},children:Object(q.jsx)(f.a,{container:!0,children:Object(q.jsx)(f.a,{item:!0,md:12,children:Object(q.jsx)(v.a,{open:i,onOpen:function(){o(!0)},onClose:function(){o(!1)},isOptionEqualToValue:function(e,t){return e===t},getOptionLabel:function(e){return e},options:p,loading:d,defaultValue:n,onChange:function(e,n){n&&t(n)},renderInput:function(e){return Object(q.jsx)(C.a,Object(h.a)(Object(h.a)({},e),{},{label:"Search City or Country",onChange:function(){var e=Object(g.a)(x.a.mark((function e(t){var a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,O(!0),e.next=4,I(a||n);case 4:c=e.sent,l(c.map((function(e){return e.name}))),O(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),InputProps:Object(h.a)(Object(h.a)({},e.InputProps),{},{endAdornment:Object(q.jsxs)(c.Fragment,{children:[d?Object(q.jsx)(S.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})})})})},E=new p.a({uri:"https://graphql-weather-api.herokuapp.com/",cache:new l.a});function N(){var e=Object(c.useState)("london"),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),i=Object(s.a)(r,2),o=i[0],u=i[1],p=Object(m.a)(O,{client:E,variables:{name:n},onCompleted:function(e){u(e.getCityByName)}}).loading;return Object(q.jsx)(j.a,{maxWidth:"lg",style:{marginTop:10},children:Object(q.jsxs)(f.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(q.jsx)(f.a,{item:!0,md:8,children:Object(q.jsx)(A,{defaultValue:n,onSelected:a})}),p&&Object(q.jsx)(f.a,{item:!0,md:8,children:"loading..."}),!p&&!!o&&Object(q.jsx)(f.a,{item:!0,md:8,children:o.weather.summary.description})]})})}var V=n(112),B=n(47),J=Object(V.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:B.a.A400}}});i.a.render(Object(q.jsxs)(u.a,{theme:J,children:[Object(q.jsx)(o.a,{}),Object(q.jsx)(N,{})]}),document.querySelector("#root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.46c762f2.chunk.js.map